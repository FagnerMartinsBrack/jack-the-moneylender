<script src="qunit.js"></script>
<link rel="stylesheet" href="qunit.css">
<div id="qunit"></div>
<script src="dollar.js"></script>
<script>
  function strictEqual({ expected, actual }, assert) {
    assert.strictEqual(actual, expected);
  }

  const interestToPayFor = (loanAmount) => {
    const END_OF_FIRST_RANGE = Money('$2000.00');
    const CENTS_FOR_FIRST_RANGE = Money('$0.00');
    const CENTS_FOR_SECOND_RANGE = Money('$0.09');

    if (loanAmount.greaterThan(END_OF_FIRST_RANGE) && loanAmount.lessThan(Money('$5001.00'))) {
      const dollarsAboveThreshold = loanAmount.minus(END_OF_FIRST_RANGE);
      const interestAmount = CENTS_FOR_SECOND_RANGE.multipliedBy(dollarsAboveThreshold);
      return interestAmount;
    }

    if (loanAmount.equalsTo(Money('$5001.00'))) {
      let interestAmount = Money('$0.00');

      const dollarsAboveThresholdForSecondRange = loanAmount.minus(END_OF_FIRST_RANGE);
      const interestAmountForSecondRange = CENTS_FOR_SECOND_RANGE.multipliedBy(dollarsAboveThresholdForSecondRange);
      interestAmount = interestAmount.plus(interestAmountForSecondRange);

      const dollarsAboveThresholdForThirdRange = Money('$5001.00').minus(Money('$5000.00'));
      const interestAmountForThirdRange = Money('$0.14').minus(Money('$0.09')).multipliedBy(dollarsAboveThresholdForThirdRange);
      interestAmount = interestAmount.plus(interestAmountForThirdRange);

      return interestAmount;
    }

    if (loanAmount.equalsTo(Money('$5002.00'))) {
      let interestAmount = Money('$0.00');

      const dollarsAboveThresholdForSecondRange = loanAmount.minus(END_OF_FIRST_RANGE);
      const interestAmountForSecondRange = CENTS_FOR_SECOND_RANGE.multipliedBy(dollarsAboveThresholdForSecondRange);
      interestAmount = interestAmount.plus(interestAmountForSecondRange);

      const dollarsAboveThresholdForThirdRange = Money('$5002.00').minus(Money('$5000.00'));
      const interestAmountForThirdRange = Money('$0.14').minus(Money('$0.09')).multipliedBy(dollarsAboveThresholdForThirdRange);
      interestAmount = interestAmount.plus(interestAmountForThirdRange);

      return interestAmount;
    }

    if (loanAmount.equalsTo(Money('$5003.00'))) {
      let interestAmount = Money('$0.00');

      const dollarsAboveThresholdForSecondRange = loanAmount.minus(END_OF_FIRST_RANGE);
      const interestAmountForSecondRange = CENTS_FOR_SECOND_RANGE.multipliedBy(dollarsAboveThresholdForSecondRange);
      interestAmount = interestAmount.plus(interestAmountForSecondRange);

      const dollarsAboveThresholdForThirdRange = Money('$5003.00').minus(Money('$5000.00'));
      const interestAmountForThirdRange = Money('$0.14').minus(Money('$0.09')).multipliedBy(dollarsAboveThresholdForThirdRange);
      interestAmount = interestAmount.plus(interestAmountForThirdRange);

      return interestAmount;
    }

    return CENTS_FOR_FIRST_RANGE;
  };

  QUnit.module('$1.00 - $2000.00 = No Interest');

  QUnit.test('$1.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.00', actual: interestToPayFor(Money('$1.00')).toString() }, assert);
  });

  QUnit.test('$2.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.00', actual: interestToPayFor(Money('$2.00')).toString() }, assert);
  });

  QUnit.test('$3.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.00', actual: interestToPayFor(Money('$3.00')).toString() }, assert);
  });

  QUnit.module('$2001.00+ = 0.09c per dollar');

  QUnit.test('$2000.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.00', actual: interestToPayFor(Money('$2000.00')).toString() }, assert);
  });

  QUnit.test('$2001.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.09', actual: interestToPayFor(Money('$2001.00')).toString() }, assert);
  });

  QUnit.test('$2002.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.18', actual: interestToPayFor(Money('$2002.00')).toString() }, assert);
  });

  QUnit.test('$2003.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$0.27', actual: interestToPayFor(Money('$2003.00')).toString() }, assert);
  });


  QUnit.test('$5000.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$270.00', actual: interestToPayFor(Money('$5000.00')).toString() }, assert);
  });
  QUnit.test('$5001.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$270.14', actual: interestToPayFor(Money('$5001.00')).toString() }, assert);
  });
  QUnit.test('$5002.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$270.28', actual: interestToPayFor(Money('$5002.00')).toString() }, assert);
  });
  QUnit.test('$5003.00 Loan Amount', (assert) => {
    strictEqual({ expected: '$270.42', actual: interestToPayFor(Money('$5003.00')).toString() }, assert);
  });
</script>